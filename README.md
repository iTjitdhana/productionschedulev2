# ğŸ“Š Production Schedule System

à¸£à¸°à¸šà¸šà¸•à¸²à¸£à¸²à¸‡à¸‡à¸²à¸™à¹à¸¥à¸°à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸œà¸¥à¸´à¸•à¸ªà¸´à¸™à¸„à¹‰à¸²à¸„à¸£à¸±à¸§à¸à¸¥à¸²à¸‡ - à¹à¸ªà¸”à¸‡à¹à¸œà¸™à¸à¸²à¸£à¸œà¸¥à¸´à¸•à¸£à¸²à¸¢à¸§à¸±à¸™à¹à¸šà¸š Gantt Chart

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![Status](https://img.shields.io/badge/status-development-yellow)
![License](https://img.shields.io/badge/license-Proprietary-red)

---

## ğŸ¯ à¸ à¸²à¸à¸£à¸§à¸¡

à¸£à¸°à¸šà¸šà¸™à¸µà¹‰à¸à¸±à¸’à¸™à¸²à¸‚à¸¶à¹‰à¸™à¹€à¸à¸·à¹ˆà¸­à¹à¸ªà¸”à¸‡à¹à¸œà¸™à¸à¸²à¸£à¸œà¸¥à¸´à¸•à¸£à¸²à¸¢à¸§à¸±à¸™à¸‚à¸­à¸‡à¸„à¸£à¸±à¸§à¸à¸¥à¸²à¸‡ à¹‚à¸”à¸¢à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸ Database à¸ˆà¸£à¸´à¸‡ à¹à¸ªà¸”à¸‡à¸œà¸¥à¹ƒà¸™à¸£à¸¹à¸›à¹à¸šà¸š Timeline/Gantt Chart à¸à¸£à¹‰à¸­à¸¡à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸‡à¸²à¸™ à¸œà¸¹à¹‰à¸›à¸à¸´à¸šà¸±à¸•à¸´à¸‡à¸²à¸™ à¹à¸¥à¸°à¸ªà¸²à¸¡à¸²à¸£à¸– Export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸›à¹‡à¸™ Excel

### âœ¨ Features (Phase 1 - MVP)

- âœ… à¹à¸ªà¸”à¸‡à¸•à¸²à¸£à¸²à¸‡à¸à¸²à¸£à¸œà¸¥à¸´à¸•à¹à¸šà¸š Timeline (8:00-17:00)
- âœ… à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸ Database à¸ˆà¸£à¸´à¸‡ (MySQL)
- âœ… à¹à¸ªà¸”à¸‡à¸œà¸¹à¹‰à¸›à¸à¸´à¸šà¸±à¸•à¸´à¸‡à¸²à¸™à¸à¸£à¹‰à¸­à¸¡à¸£à¸¹à¸›à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
- âœ… à¹à¸ªà¸”à¸‡à¸£à¸¹à¸›à¸ à¸²à¸à¸ªà¸´à¸™à¸„à¹‰à¸²
- âœ… à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸‡à¸²à¸™à¹à¸šà¸š Modal
- âœ… Export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸›à¹‡à¸™ Excel
- âœ… à¸à¸´à¸¡à¸à¹Œà¸•à¸²à¸£à¸²à¸‡
- âœ… à¸£à¸­à¸‡à¸£à¸±à¸šà¸ à¸²à¸©à¸²à¹„à¸—à¸¢à¹€à¸•à¹‡à¸¡à¸£à¸¹à¸›à¹à¸šà¸š

---

## ğŸ—ï¸ à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚â”€â”€â”€â”€â–º â”‚   Backend   â”‚â”€â”€â”€â”€â–º â”‚  Database   â”‚
â”‚  Next.js    â”‚      â”‚  Express    â”‚      â”‚   MySQL     â”‚
â”‚  Port: 3017 â”‚      â”‚  Port: 3107 â”‚      â”‚  Port: 3306 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technology Stack:

**Frontend:**
- Next.js 15.2.4
- React 19
- TypeScript
- TailwindCSS 4
- shadcn/ui

**Backend:**
- Express.js
- TypeScript
- mysql2 (promise-based)
- CORS

**Database:**
- MySQL 8.0+
- Configuration: See `.env.development` / `.env.production`
- Connection: Via environment variables (no hardcoded credentials)

---

## ğŸ“‹ à¹€à¸­à¸à¸ªà¸²à¸£à¸›à¸£à¸°à¸à¸­à¸š

- ğŸ“„ [REQUIREMENTS.md](./docs/REQUIREMENTS.md) - à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸£à¸°à¸šà¸š
- ğŸ”§ [SPECSHEET.md](./docs/SPECSHEET.md) - à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸—à¸²à¸‡à¹€à¸—à¸„à¸™à¸´à¸„
- ğŸš¨ [DEPLOYMENT_ISSUES.md](./docs/DEPLOYMENT_ISSUES.md) - à¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¸à¸šà¸šà¹ˆà¸­à¸¢à¹à¸¥à¸°à¸§à¸´à¸˜à¸µà¹à¸à¹‰
- ğŸ“Š [DATABASE_STRUCTURE.md](./DATABASE_STRUCTURE.md) - à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ Database

---

## ğŸš€ Getting Started

### Prerequisites

- Node.js 18+ 
- npm à¸«à¸£à¸·à¸­ pnpm
- MySQL 8.0
- Access à¹„à¸›à¸¢à¸±à¸‡ Database (192.168.0.96:3306)

### Installation

#### 1. Clone Repository (à¹€à¸•à¸£à¸µà¸¢à¸¡à¹„à¸§à¹‰)
```bash
git clone <repository-url>
cd production-schedule-system
```

#### 2. Install Dependencies

**Frontend:**
```bash
cd frontend
npm install
```

**Backend:**
```bash
cd backend
npm install
```

#### 3. Configuration

âš ï¸ **Environment Setup** (DEV_STANDARD Compliant)

**Step 1:** Create environment files from templates:

```bash
# Frontend
cp .env.example .env.development
cp .env.example .env.production

# Backend
cp backend/.env.example backend/.env.development
cp backend/.env.example backend/.env.production
```

**Step 2:** Update credentials in `.env.development` and `.env.production`

**âš ï¸ Never commit `.env*` files with real credentials to Git!**

Example values (see `.env.example` for full template):
```env
# Frontend
NEXT_PUBLIC_API_BASE_URL=http://localhost:3107

# Backend
DB_HOST=your_db_host
DB_USER=your_db_user
DB_PASSWORD=***
DB_NAME=manufacturing_system
```

#### 4. Run Development

**Backend:**
```bash
cd backend
npm run dev
```

**Frontend:**
```bash
cd frontend
npm run dev
```

#### 5. Open Browser
```
http://localhost:3017
```

---

## ğŸ—ï¸ Project Structure

```
production-schedule-system/
â”œâ”€â”€ frontend/                 # Next.js Frontend
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ production-schedule.tsx
â”‚   â”‚   â””â”€â”€ ui/              # shadcn components
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api.ts          # API client
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ images/         # Worker avatars
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/                 # Express Backend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ database.ts
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ workplans.ts
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ .env
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                    # Documentation
â”‚   â”œâ”€â”€ REQUIREMENTS.md
â”‚   â”œâ”€â”€ SPECSHEET.md
â”‚   â””â”€â”€ DEPLOYMENT_ISSUES.md
â”‚
â”œâ”€â”€ test-db-connection.js   # Database test script
â””â”€â”€ README.md
```

---

## ğŸ”§ API Endpoints

### Get Work Plans
```
GET /api/workplans?date=YYYY-MM-DD
```

**Example:**
```bash
curl http://localhost:3107/api/workplans?date=2025-10-08
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": 7398,
      "job_code": "135042",
      "job_name": "à¸™à¹ˆà¸­à¸‡à¹„à¸à¹ˆà¸•à¸´à¸”à¸ªà¸°à¹‚à¸à¸ à¸„à¸¥à¸°à¹„à¸‹à¸ªà¹Œ - CT",
      "start_time": "08:30",
      "end_time": "16:00",
      "location": "à¸«à¹‰à¸­à¸‡à¸œà¸±à¸",
      "assignees": [...]
    }
  ],
  "meta": {
    "date": "2025-10-08",
    "total": 17
  }
}
```

### Health Check
```
GET /api/health
```

---

## ğŸ¨ Color Palette

à¸ªà¸µà¸‚à¸­à¸‡à¸‡à¸²à¸™à¸à¸³à¸«à¸™à¸”à¸•à¸²à¸¡à¸¥à¸³à¸”à¸±à¸šà¸à¸²à¸£à¹à¸ªà¸”à¸‡ (à¹„à¸¡à¹ˆà¸Ÿà¸´à¸à¸—à¸µà¹ˆà¸‡à¸²à¸™):

```typescript
const COLOR_PALETTE = [
  'bg-orange-200',    // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 1
  'bg-lime-200',      // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 2
  'bg-yellow-200',    // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 3
  'bg-cyan-200',      // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 4
  'bg-purple-200',    // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 5
  'bg-emerald-200',   // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 6
  'bg-sky-200',       // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 7
  'bg-amber-200',     // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 8
  'bg-teal-200',      // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 9
  'bg-pink-200',      // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 10
  'bg-violet-200',    // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 11
  'bg-blue-200',      // à¸‡à¸²à¸™à¸—à¸µà¹ˆ 12
];
```

---

## ğŸ› Troubleshooting

### à¸›à¸±à¸à¸«à¸²: à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Database à¹„à¸¡à¹ˆà¹„à¸”à¹‰

```bash
# à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­
node test-db-connection.js
```

**à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š:**
- âœ… Database server à¸—à¸³à¸‡à¸²à¸™
- âœ… User/Password à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
- âœ… Network à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡ 192.168.0.96:3306 à¹„à¸”à¹‰
- âœ… Firewall à¹„à¸¡à¹ˆà¸šà¸¥à¹‡à¸­à¸ port

### à¸›à¸±à¸à¸«à¸²: CORS Error

**à¹à¸à¹‰à¹„à¸‚ Backend (.env):**
```env
CORS_ORIGIN=*
```

### à¸›à¸±à¸à¸«à¸²: à¸§à¸±à¸™à¸—à¸µà¹ˆà¸«à¸¥à¸¸à¸” 1 à¸§à¸±à¸™

**à¹ƒà¸Šà¹‰ Timezone à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡:**
```typescript
const today = new Date().toLocaleDateString('en-CA', {
  timeZone: 'Asia/Bangkok'
});
```

### à¸›à¸±à¸à¸«à¸²: à¹€à¸‚à¹‰à¸²à¸ˆà¸²à¸à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸­à¸·à¹ˆà¸™à¹„à¸¡à¹ˆà¹„à¸”à¹‰

**à¸”à¸¹:** [DEPLOYMENT_ISSUES.md](./docs/DEPLOYMENT_ISSUES.md)

---

## ğŸ“¦ Deployment

### Production Build

**Frontend:**
```bash
cd frontend
npm run build
npm run start -p 3017
```

**Backend:**
```bash
cd backend
npm run build
npm start
```

### Environment Variables (Production)

Use `.env.production` files (created from `.env.example`):

**Frontend:** `.env.production`
```env
NEXT_PUBLIC_API_BASE_URL=http://your-server-ip:3107
NODE_ENV=production
```

**Backend:** `backend/.env.production`
```env
NODE_ENV=production
DB_HOST=your_db_host
DB_USER=***
DB_PASSWORD=***
CORS_ORIGIN=http://your-server-ip:3017
```

**âš ï¸ Security:** Update credentials and use strong passwords in production!

### Using PM2 (Recommended)

```bash
# Install PM2
npm install -g pm2

# Start services
pm2 start ecosystem.config.js

# Save & Auto-restart
pm2 save
pm2 startup
```

---

## ğŸ§ª Testing

### Test Database Connection
```bash
node test-db-connection.js
```

### Test Backend API
```bash
# Health check
curl http://localhost:3107/api/health

# Get work plans
curl http://localhost:3107/api/workplans?date=2025-10-08
```

---

## ğŸ“ Known Issues

1. âš ï¸ `production_room_id` à¹€à¸›à¹‡à¸™ NULL à¹ƒà¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ work_plans
2. âš ï¸ `work_plan_operators.user_id` à¹€à¸›à¹‡à¸™ NULL, à¹ƒà¸Šà¹‰ `id_code` à¹à¸—à¸™
3. âš ï¸ à¸šà¸²à¸‡ `id_code` à¹„à¸¡à¹ˆ match à¸à¸±à¸š users (à¹€à¸Šà¹ˆà¸™ 'Ola' vs 'ole')
4. âš ï¸ à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ `process_executions` (steps) à¸ªà¸³à¸«à¸£à¸±à¸šà¸šà¸²à¸‡à¸‡à¸²à¸™

---

## ğŸ“¦ Git Workflow & Version Control

This project follows **DEV_STANDARD.md** for version control and deployment.

### Branch Strategy
- `main` â†’ Production-ready releases (tagged)
- `develop` â†’ Integration branch for features
- `feature/<name>` â†’ New features
- `fix/<name>` â†’ Bug fixes

### Commit Message Convention
Follow **Conventional Commits**:

```bash
feat: à¹€à¸à¸´à¹ˆà¸¡à¸£à¸°à¸šà¸š export CSV
fix: à¹à¸à¹‰à¸›à¸±à¸à¸«à¸² timezone à¸—à¸µà¹ˆà¸§à¸±à¸™à¸—à¸µà¹ˆà¸«à¸¥à¸¸à¸”
chore: à¸­à¸±à¸›à¹€à¸”à¸• dependencies
docs: à¹€à¸à¸´à¹ˆà¸¡à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢ deployment
```

### Tagging & Releases

**Version Format:** `vMAJOR.MINOR.PATCH`

- **Major (v2.0.0):** Breaking changes
- **Minor (v1.1.0):** New features
- **Patch (v1.0.1):** Bug fixes

**Example:**
```bash
# After completing feature
git add .
git commit -m "feat: à¹€à¸à¸´à¹ˆà¸¡à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰"
git tag v1.4.0
git push && git push --tags
```

### Deployment (Linux Server)

**Deploy new version:**
```bash
# On server
git fetch --all
git checkout v1.4.0
docker compose -f infra/docker-compose.prod.yml up -d --build
```

**Using Docker Compose:**
```bash
# Development
docker compose -f infra/docker-compose.dev.yml up -d

# Production
docker compose -f infra/docker-compose.prod.yml up -d --build
```

### Rollback Procedure

**If something goes wrong, rollback to previous version:**

```bash
# Step 1: Check available versions
git tag

# Step 2: Checkout previous stable version
git checkout v1.3.1

# Step 3: Rebuild and restart
docker compose -f infra/docker-compose.prod.yml up -d --build

# Step 4: Verify
curl http://localhost:3107/api/health
```

**Quick Rollback Commands:**
```bash
# Stop current version
docker compose -f infra/docker-compose.prod.yml down

# Checkout previous tag
git checkout v1.3.1

# Restart
docker compose -f infra/docker-compose.prod.yml up -d --build
```

---

## ğŸ—ºï¸ Roadmap

### Phase 1 (Current) - MVP
- [x] Basic UI/UX
- [x] Database integration
- [x] Display work plans
- [x] Export to Excel
- [x] Environment-based configuration (DEV_STANDARD)
- [x] Security middleware (Helmet, Rate Limit)
- [x] Health check endpoint with trace ID
- [ ] Bug fixes & optimization

### Phase 2 (Future)
- [ ] Process steps display
- [ ] Date picker
- [ ] User authentication
- [ ] CRUD operations
- [ ] Real-time updates
- [ ] Mobile responsive
- [ ] Reports & Analytics

---

## ğŸ‘¥ Team

- **Development**: [Your Team]
- **Database Admin**: [DBA Name]
- **Project Manager**: [PM Name]

---

## ğŸ“„ License

Proprietary - à¹ƒà¸Šà¹‰à¸ à¸²à¸¢à¹ƒà¸™à¸­à¸‡à¸„à¹Œà¸à¸£à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™

---

## ğŸ™ Acknowledgments

- [Next.js](https://nextjs.org/)
- [shadcn/ui](https://ui.shadcn.com/)
- [TailwindCSS](https://tailwindcss.com/)
- [Lucide Icons](https://lucide.dev/)

---

## ğŸ“ Support

à¸«à¸²à¸à¸à¸šà¸›à¸±à¸à¸«à¸²à¸«à¸£à¸·à¸­à¸¡à¸µà¸„à¸³à¸–à¸²à¸¡:
1. à¸”à¸¹à¹€à¸­à¸à¸ªà¸²à¸£à¹ƒà¸™ `/docs`
2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š [DEPLOYMENT_ISSUES.md](./docs/DEPLOYMENT_ISSUES.md)
3. à¸•à¸´à¸”à¸•à¹ˆà¸­à¸—à¸µà¸¡à¸à¸±à¸’à¸™à¸²

---

**à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸¡à¸·à¹ˆà¸­**: 10 à¸•à¸¸à¸¥à¸²à¸„à¸¡ 2025  
**à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™**: 1.0.0  
**à¸ªà¸–à¸²à¸™à¸°**: Active Development





